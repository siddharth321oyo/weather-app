(this["webpackJsonpproject3.1"]=this["webpackJsonpproject3.1"]||[]).push([[0],{14:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),r=a(8),l=a.n(r),c=a(2),o=a(3),s=a(4),h=a(1),m=a(5),d=a(6);var u=function(e){return n.a.createElement("div",null,n.a.createElement("input",{name:"query",type:"text",placeholder:"Search new places",value:e.query,onChange:e.handleChange,onKeyPress:e.search}),n.a.createElement("i",{className:"fas fa-search search-icon"}),n.a.createElement("select",null,n.a.createElement("option",{disabled:!0,selected:!0,hidden:!0},"All places")),n.a.createElement("h1",{id:"title"}," ",n.a.createElement("span",null,"Weather")," Forecast"))};function g(e){return n.a.createElement("li",{onClick:e.changeLocation,id:e.city},n.a.createElement("img",{src:e.image,className:"place-image",alt:"Could not load",style:{width:"150px",height:"190px"}}),n.a.createElement("p",{className:"place-name"},e.city,", ",e.country))}function p(e){return n.a.createElement("div",{id:"places-form"},n.a.createElement("i",{className:"fas fa-times fa-2x",onClick:e.toggleForm}),n.a.createElement("h1",null,"Form to enter a new city"),n.a.createElement("label",null,"City Name ",n.a.createElement("input",{onChange:e.changeFormvals,type:"text",value:e.placeName,name:"placeName"})),n.a.createElement("label",null,"Image Url ",n.a.createElement("input",{onChange:e.changeFormvals,type:"text",value:e.url,name:"url"})),n.a.createElement("button",{id:"form-button",onClick:e.submitForm},"Submit"))}var f=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).state={places:[{city:"Paris",country:"FR",image:"https://images.adsttc.com/media/images/5d44/14fa/284d/d1fd/3a00/003d/large_jpg/eiffel-tower-in-paris-151-medium.jpg?1564742900"},{city:"Moscow",country:"RU",image:"https://assets.browserlondon.com/app/uploads/2019/10/st-basils-cathedral-3-768x432.jpg"},{city:"Dehradun",country:"IN",image:"https://uttarakhandtourism.gov.in/wp-content/uploads/2018/11/dehradun-2.jpg"}],showForm:!1,placeName:"",url:""},i.toggleForm=i.toggleForm.bind(Object(h.a)(i)),i.submitForm=i.submitForm.bind(Object(h.a)(i)),i.changeFormvals=i.changeFormvals.bind(Object(h.a)(i)),i}return Object(s.a)(a,[{key:"toggleForm",value:function(){this.setState((function(e){return{showForm:!e.showForm}}))}},{key:"submitForm",value:function(){var e=this;fetch("http://api.openweathermap.org/data/2.5/weather?q="+this.state.placeName+"&units=metric&APPID=a1b2e27681e2aa3558ef7c95b9493f32").then((function(e){return e.json()})).then((function(t){200===t.cod&&e.setState((function(e){return e.places.push({city:e.placeName,country:t.sys.country,image:e.url}),{places:e.places,showForm:!1,placeName:"",url:""}}))}))}},{key:"changeFormvals",value:function(e){var t=e.target,a=t.name,i=t.value;this.setState(Object(c.a)({},a,i))}},{key:"render",value:function(){var e=this,t=this.state.places.map((function(t){return n.a.createElement(g,{key:t.city,city:t.city,country:t.country,image:t.image,changeLocation:e.props.changeLocation})}));return n.a.createElement("div",null,n.a.createElement("ul",{id:"place-list"},t,n.a.createElement("li",null,n.a.createElement("button",{onClick:this.toggleForm},n.a.createElement("div",null,n.a.createElement("i",{className:"fas fa-plus button-icon"})),"Add City"))),this.state.showForm&&n.a.createElement(p,{toggleForm:this.toggleForm,changeFormvals:this.changeFormvals,submitForm:this.submitForm,placeName:this.state.placeName,url:this.state.url}))}}]),a}(n.a.Component);var E=function(e){var t="fas fa-"+{"01":"sun","02":"cloud-sun","03":"cloud","04":"cloud","09":"cloud-rain",10:"cloud-showers-heavy",11:"bolt",13:"snowflake",50:"smog"}[e.icon];return void 0!==e.otherClasses&&(t+=" "+e.otherClasses),n.a.createElement("i",{className:t})};function b(e){var t=e.data.map((function(t){return n.a.createElement("li",{myattri:t.time,key:t.time,onClick:e.highlight,className:e.highlightIdentifier===t.time?"highlight-detail":""},n.a.createElement("p",null,t.time)," ",n.a.createElement(E,{icon:t.icon})," ",n.a.createElement("p",null,t.temp))}));return n.a.createElement("ul",{id:"detail-list",style:{left:e.clientX,top:e.clientY}},t)}function y(e){var t=100-(e.data.temp_max-e.data.temp_min)/e.data.temp_max*100+"%";return n.a.createElement("li",{id:e.data.date,onClick:e.showDetails},n.a.createElement("span",{className:"forecast-date"},e.data.date),n.a.createElement("span",{className:"forecast-humidity"},n.a.createElement("i",{className:"forecast-icon fas fa-tint"}),e.data.humidity),n.a.createElement("span",{className:"forecast-icons"},n.a.createElement(E,{otherClasses:"forecast-icon",icon:e.data.condition[0].icon})),n.a.createElement("span",{className:"forecast-temp-min"},e.data.temp_min)," ",n.a.createElement("span",{className:"progress-bar"},n.a.createElement("span",{className:"progress",style:{width:t}}))," ",n.a.createElement("span",{className:"forecast-temp-max"},e.data.temp_max),e.detailId===e.data.date&&n.a.createElement(b,{clientX:e.clientX,clientY:e.clientY,highlight:e.highlight,highlightIdentifier:e.highlightIdentifier,data:e.data.condition}))}var v=function(e){var t=[];return e.loading||e.error||(t=e.forecastData.map((function(t){return n.a.createElement(y,{clientX:e.clientX,clientY:e.clientY,highlight:e.highlight,highlightIdentifier:e.highlightIdentifier,data:t,key:t.date,detailId:e.detailId,showDetails:e.showDetails})}))),n.a.createElement("div",null,n.a.createElement("h1",null,e.location),e.loading&&n.a.createElement("h1",null,"Loading..."),!e.loading&&e.error&&n.a.createElement("h1",null,"Error"),!e.loading&&!e.error&&n.a.createElement("ul",{id:"forecast-list"},t))};var w=function(e){return n.a.createElement("span",{id:"left-panel"},n.a.createElement(u,{query:e.query,search:e.search,handleChange:e.handleChange}),n.a.createElement(f,{changeLocation:e.changeLocation}),e.showResults&&n.a.createElement(v,{highlight:e.highlight,highlightIdentifier:e.highlightIdentifier,loading:e.loading,location:e.location,error:e.error,forecastData:e.forecastData,detailId:e.detailId,showDetails:e.showDetails,clientY:e.clientY,clientX:e.clientX}))};var I=function(){return n.a.createElement("div",null,n.a.createElement("button",{id:"notif"},"Notifications"),n.a.createElement("button",{id:"places-button"},"Places"),n.a.createElement("img",{src:"https://www.machinecurve.com/wp-content/uploads/2019/07/thispersondoesnotexist-1.jpg",style:{width:"50px",height:"50px"}}))};var x=function(e){return n.a.createElement("div",{id:"weather-report"},n.a.createElement("div",null,n.a.createElement("span",{id:"icon-span"},n.a.createElement(E,{icon:e.weatherReportData.icon,otherClasses:"fa-2x"})),n.a.createElement("span",{id:"date-span"},n.a.createElement("h1",null,"Today"),n.a.createElement("p",null,e.date))),n.a.createElement("div",null,n.a.createElement("p",{id:"weather-temp"},e.weatherReportData.temp,"\xb0C"),n.a.createElement("p",null,e.weatherReportData.city,", ",e.weatherReportData.country),n.a.createElement("p",null,"Feels Like ",e.weatherReportData.feels_like," \u25cf Max Temp ",e.weatherReportData.temp_max," \u25cf Min Temp ",e.weatherReportData.temp_min)))};var D=function(e){for(var t=[],a=0;a<e.forecastData.length;a++)if(e.detailId===e.forecastData[a].date){t=e.forecastData[a].condition;break}var i={"01":"35px","02":"70px","03":"105px","04":"140px","09":"175px",10:"210px",11:"245px",13:"35px",50:"35px"},r=t.map((function(t,a){var r="bar "+(t.time===e.highlightIdentifier?"highlighted-bar":"normal-bar");return n.a.createElement("div",{key:a,className:"graph-element"},n.a.createElement("div",null,t.time),n.a.createElement("div",{myattri:t.time,className:r,onClick:e.highlight,style:{height:i[t.icon]}}))}));return n.a.createElement("div",{id:"graph"},n.a.createElement("p",{id:"graph-heading"},"Chances of Rain"),n.a.createElement("div",{id:"graph-box"},r))};var F=function(e){return n.a.createElement("span",{id:"right-panel"},n.a.createElement(I,null),!e.loading&&!e.error&&n.a.createElement(x,{weatherReportData:e.weatherReportData,date:e.date}),""!==e.detailId&&n.a.createElement(D,{highlight:e.highlight,highlightIdentifier:e.highlightIdentifier,forecastData:e.forecastData,detailId:e.detailId}))},k=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={location:"",forecastData:[],weatherReportData:"",query:"",loading:!0,showResults:!1,detailId:"",date:"",highlightIdentifier:""},e.clientX=null,e.clientY=null,e.changeLocation=e.changeLocation.bind(Object(h.a)(e)),e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.search=e.search.bind(Object(h.a)(e)),e.formatForecast=e.formatForecast.bind(Object(h.a)(e)),e.formatWeatherReport=e.formatWeatherReport.bind(Object(h.a)(e)),e.showDetails=e.showDetails.bind(Object(h.a)(e)),e.highlight=e.highlight.bind(Object(h.a)(e)),e}return Object(s.a)(a,[{key:"highlight",value:function(e){var t=e.currentTarget.getAttribute("myattri");this.state.highlightIdentifier===t?this.setState({highlightIdentifier:""}):this.setState({highlightIdentifier:e.currentTarget.getAttribute("myattri")}),e.stopPropagation()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,i=t.value;this.setState(Object(c.a)({},a,i))}},{key:"search",value:function(e){13!==e.which&&13!==e.keyCode||this.setState((function(e){return{location:e.query,showResults:!0,detailId:"",highlightIdentifier:""}}))}},{key:"changeLocation",value:function(e){this.setState({location:e.currentTarget.getAttribute("id"),showResults:!0,detailId:"",highlightIdentifier:""})}},{key:"showDetails",value:function(e){this.clientX=e.clientX,this.clientY=e.clientY,e.clientY+150>window.innerHeight&&(this.clientY-=150);var t=e.currentTarget.getAttribute("id");""===this.state.detailId?this.setState({detailId:t}):this.state.detailId===t&&this.setState({detailId:"",highlightIdentifier:""})}},{key:"formatForecast",value:function(e){for(var t=[],a=0;a<e.length;a++){for(var i=e[a],n=-1,r=a,l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,o=[],s=i.dt_txt.substr(0,i.dt_txt.indexOf(" "));r<e.length&&0===e[r].dt_txt.indexOf(s);)l=Math.min(l,e[r].main.temp_min),c=Math.max(c,e[r].main.temp_max),n=-1===n?e[r].main.humidity:(n+e[r].main.humidity)/2,o.push({time:e[r].dt_txt.substr(e[r].dt_txt.indexOf(" ")+1).substr(0,5),icon:e[r].weather[0].icon.substr(0,2),temp:e[r].main.temp}),0===a&&this.setState({date:s}),r++;t.push({date:s,temp_max:c,temp_min:l,humidity:n.toFixed(2),condition:o}),a=r-1}this.setState({forecastData:t})}},{key:"formatWeatherReport",value:function(e){this.setState({weatherReportData:{city:e.name,country:e.sys.country,temp:e.main.temp,feels_like:e.main.feels_like,temp_max:e.main.temp_max,temp_min:e.main.temp_min,icon:e.weather[0].icon.substr(0,2)},loading:!1,error:!1})}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.location!==this.state.location&&(this.setState({loading:!0}),fetch("http://api.openweathermap.org/data/2.5/forecast?q="+this.state.location+"&units=metric&APPID=a1b2e27681e2aa3558ef7c95b9493f32").then((function(e){return e.json()})).then((function(e){"200"!==e.cod?a.setState({error:!0}):a.formatForecast(e.list)})),fetch("http://api.openweathermap.org/data/2.5/weather?q="+this.state.location+"&units=metric&APPID=a1b2e27681e2aa3558ef7c95b9493f32").then((function(e){return e.json()})).then((function(e){200!==e.cod?a.setState({error:!0,loading:!1}):a.formatWeatherReport(e)})))}},{key:"render",value:function(){return n.a.createElement("span",{id:"container",ref:this.containerRef},n.a.createElement(w,{query:this.state.query,search:this.search,handleChange:this.handleChange,changeLocation:this.changeLocation,showResults:this.state.showResults,location:this.state.location,loading:this.state.loading,error:this.state.error,forecastData:this.state.forecastData,detailId:this.state.detailId,showDetails:this.showDetails,containerRef:this.containerRef,highlight:this.highlight,highlightIdentifier:this.state.highlightIdentifier,clientX:this.clientX,clientY:this.clientY}),n.a.createElement(F,{weatherReportData:this.state.weatherReportData,forecastData:this.state.forecastData,date:this.state.date,loading:this.state.loading,error:this.state.error,detailId:this.state.detailId,highlight:this.highlight,highlightIdentifier:this.state.highlightIdentifier}))}}]),a}(n.a.Component);l.a.render(n.a.createElement(k,null),document.getElementById("root"))},9:function(e,t,a){e.exports=a(14)}},[[9,1,2]]]);
//# sourceMappingURL=main.e3756725.chunk.js.map